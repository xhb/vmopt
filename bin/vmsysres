#!/usr/bin/env ruby
#encoding: utf-8
require "vmopt/system_resource"
require "optparse"

option = {}
option_parser = OptionParser.new do | opts |
  opts.banner = %q/
  Help: 
    Description:
      vmsysres tool, use for query system resource information, including cpu and memery.
    function:
      1.get_cpu        
      2.get_memory

    Example:
      vmsysres --query  cpu    
      vmsysres --query  memery  

  /
  opts.on('-q queryopt', '--query  queryopt', 'Query system resource information') do |value|
    option[:queryopt] = value
    option[:cmd] = "query"
  end

end.parse!

   $sys = Vmopt::SystemResource.new
   if option[:cmd] == "query"
      if option[:queryopt] == 'cpu'
        $sys.get_cpu
      elsif option[:queryopt] == 'memery'
        $sys.get_memory
      else 
        puts "Please check the params..."
      end
   end


